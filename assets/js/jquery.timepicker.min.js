!function(a){"object"==typeof exports&&exports&&"object"==typeof module&&module&&module.exports===exports?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function f(a){var b=a[0];return b.offsetWidth>0&&b.offsetHeight>0}function g(b){if(b.minTime&&(b.minTime=x(b.minTime)),b.maxTime&&(b.maxTime=x(b.maxTime)),b.durationTime&&"function"!=typeof b.durationTime&&(b.durationTime=x(b.durationTime)),"now"==b.scrollDefault?b.scrollDefault=x(new Date):b.scrollDefault?b.scrollDefault=x(b.scrollDefault):b.minTime&&(b.scrollDefault=b.minTime),b.scrollDefault&&(b.scrollDefault=b.roundingFunction(b.scrollDefault,b)),"string"===a.type(b.timeFormat)&&b.timeFormat.match(/[gh]/)&&(b._twelveHourTime=!0),b.disableTimeRanges.length>0){for(var c in b.disableTimeRanges)b.disableTimeRanges[c]=[x(b.disableTimeRanges[c][0]),x(b.disableTimeRanges[c][1])];b.disableTimeRanges=b.disableTimeRanges.sort(function(a,b){return a[0]-b[0]});for(var c=b.disableTimeRanges.length-1;c>0;c--)b.disableTimeRanges[c][0]<=b.disableTimeRanges[c-1][1]&&(b.disableTimeRanges[c-1]=[Math.min(b.disableTimeRanges[c][0],b.disableTimeRanges[c-1][0]),Math.max(b.disableTimeRanges[c][1],b.disableTimeRanges[c-1][1])],b.disableTimeRanges.splice(c,1))}return b}function h(b){var d=b.data("timepicker-settings"),f=b.data("timepicker-list");if(f&&f.length&&(f.remove(),b.data("timepicker-list",!1)),d.useSelect){f=a("<select />",{"class":"ui-timepicker-select"});var g=f}else{f=a("<ul />",{"class":"ui-timepicker-list"});var g=a("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});g.css({display:"none",position:"absolute"}).append(f)}if(d.noneOption)if(d.noneOption===!0&&(d.noneOption=d.useSelect?"Time...":"None"),a.isArray(d.noneOption)){for(var h in d.noneOption)if(parseInt(h,10)==h){var k=i(d.noneOption[h],d.useSelect);f.append(k)}}else{var k=i(d.noneOption,d.useSelect);f.append(k)}d.className&&g.addClass(d.className),null===d.minTime&&null===d.durationTime||!d.showDuration||("function"==typeof d.step?"function":d.step,g.addClass("ui-timepicker-with-duration"),g.addClass("ui-timepicker-step-"+d.step));var n=d.minTime;"function"==typeof d.durationTime?n=x(d.durationTime()):null!==d.durationTime&&(n=d.durationTime);var p=null!==d.minTime?d.minTime:0,q=null!==d.maxTime?d.maxTime:p+c-1;p>q&&(q+=c),q===c-1&&"string"===a.type(d.timeFormat)&&d.show2400&&(q=c);var s=d.disableTimeRanges,t=0,y=s.length,z=d.step;"function"!=typeof z&&(z=function(){return d.step});for(var h=p,A=0;q>=h;A++,h+=60*z(A)){var B=h,C=w(B,d);if(d.useSelect){var D=a("<option />",{value:C});D.text(C)}else{var D=a("<li />");D.data("time",86400>=B?B:B%86400),D.text(C)}if((null!==d.minTime||null!==d.durationTime)&&d.showDuration){var E=v(h-n,d.step);if(d.useSelect)D.text(D.text()+" ("+E+")");else{var F=a("<span />",{"class":"ui-timepicker-duration"});F.text(" ("+E+")"),D.append(F)}}y>t&&(B>=s[t][1]&&(t+=1),s[t]&&B>=s[t][0]&&B<s[t][1]&&(d.useSelect?D.prop("disabled",!0):D.addClass("ui-timepicker-disabled"))),f.append(D)}if(g.data("timepicker-input",b),b.data("timepicker-list",g),d.useSelect)b.val()&&f.val(j(b.val(),d)),f.on("focus",function(){a(this).data("timepicker-input").trigger("showTimepicker")}),f.on("blur",function(){a(this).data("timepicker-input").trigger("hideTimepicker")}),f.on("change",function(){r(b,a(this).val(),"select")}),r(b,f.val()),b.hide().after(f);else{var G=d.appendTo;"string"==typeof G?G=a(G):"function"==typeof G&&(G=G(b)),G.append(g),o(b,f),f.on("mousedown","li",function(){b.off("focus.timepicker"),b.on("focus.timepicker-ie-hack",function(){b.off("focus.timepicker-ie-hack"),b.on("focus.timepicker",e.show)}),m(b)||b[0].focus(),f.find("li").removeClass("ui-timepicker-selected"),a(this).addClass("ui-timepicker-selected"),u(b)&&(b.trigger("hideTimepicker"),f.on("mouseup.timepicker","li",function(){f.off("mouseup.timepicker"),g.hide()}))})}}function i(b,c){var d,e,f;return"object"==typeof b?(d=b.label,e=b.className,f=b.value):"string"==typeof b?d=b:a.error("Invalid noneOption value"),c?a("<option />",{value:f,"class":e,text:d}):a("<li />",{"class":e,text:d}).data("time",f)}function j(a,b){return a=b.roundingFunction(a,b),null!==a?w(a,b):void 0}function k(){return new Date(1970,1,1,0,0,0)}function l(b){var c=a(b.target),d=c.closest(".ui-timepicker-input");0===d.length&&0===c.closest(".ui-timepicker-wrapper").length&&(e.hide(),a(document).unbind(".ui-timepicker"))}function m(a){var b=a.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&b.disableTouchKeyboard}function n(b,c,d){if(!d&&0!==d)return!1;var e=b.data("timepicker-settings"),f=!1,d=e.roundingFunction(d,e);return c.find("li").each(function(b,c){var e=a(c);if("number"==typeof e.data("time"))return e.data("time")==d?(f=e,!1):void 0}),f}function o(a,b){b.find("li").removeClass("ui-timepicker-selected");var c=x(q(a),a.data("timepicker-settings"));if(null!==c){var d=n(a,b,c);if(d){var e=d.offset().top-b.offset().top;(e+d.outerHeight()>b.outerHeight()||0>e)&&b.scrollTop(b.scrollTop()+d.position().top-d.outerHeight()),d.addClass("ui-timepicker-selected")}}}function p(b,c){if(""!==this.value&&"timepicker"!=c){var d=a(this);if(!d.is(":focus")||b&&"change"==b.type){var e=d.data("timepicker-settings"),f=x(this.value,e);if(null===f)return d.trigger("timeFormatError"),void 0;var g=!1;null!==e.minTime&&f<e.minTime?g=!0:null!==e.maxTime&&f>e.maxTime&&(g=!0),a.each(e.disableTimeRanges,function(){return f>=this[0]&&f<this[1]?(g=!0,!1):void 0}),e.forceRoundTime&&(f=e.roundingFunction(f,e));var h=w(f,e);g?r(d,h,"error")&&d.trigger("timeRangeError"):r(d,h)}}}function q(a){return a.is("input")?a.val():a.data("ui-timepicker-value")}function r(a,b,c){if(a.is("input")){a.val(b);var d=a.data("timepicker-settings");d.useSelect&&"select"!=c&&a.data("timepicker-list").val(j(b,d))}return a.data("ui-timepicker-value")!=b?(a.data("ui-timepicker-value",b),"select"==c?a.trigger("selectTime").trigger("changeTime").trigger("change","timepicker"):"error"!=c&&a.trigger("changeTime"),!0):(a.trigger("selectTime"),!1)}function s(b){var c=a(this),d=c.data("timepicker-list");if(!d||!f(d)){if(40!=b.keyCode)return!0;e.show.call(c.get(0)),d=c.data("timepicker-list"),m(c)||c.focus()}switch(b.keyCode){case 13:return u(c)&&e.hide.apply(this),b.preventDefault(),!1;case 38:var g=d.find(".ui-timepicker-selected");return g.length?g.is(":first-child")||(g.removeClass("ui-timepicker-selected"),g.prev().addClass("ui-timepicker-selected"),g.prev().position().top<g.outerHeight()&&d.scrollTop(d.scrollTop()-g.outerHeight())):(d.find("li").each(function(b,c){return a(c).position().top>0?(g=a(c),!1):void 0}),g.addClass("ui-timepicker-selected")),!1;case 40:return g=d.find(".ui-timepicker-selected"),0===g.length?(d.find("li").each(function(b,c){return a(c).position().top>0?(g=a(c),!1):void 0}),g.addClass("ui-timepicker-selected")):g.is(":last-child")||(g.removeClass("ui-timepicker-selected"),g.next().addClass("ui-timepicker-selected"),g.next().position().top+2*g.outerHeight()>d.outerHeight()&&d.scrollTop(d.scrollTop()+g.outerHeight())),!1;case 27:d.find("li").removeClass("ui-timepicker-selected"),e.hide();break;case 9:e.hide();break;default:return!0}}function t(b){var c=a(this),d=c.data("timepicker-list");if(!d||!f(d))return!0;if(!c.data("timepicker-settings").typeaheadHighlight)return d.find("li").removeClass("ui-timepicker-selected"),!0;switch(b.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:o(c,d);break;default:return}}function u(a){var b=a.data("timepicker-settings"),c=a.data("timepicker-list"),d=null,e=c.find(".ui-timepicker-selected");if(e.hasClass("ui-timepicker-disabled"))return!1;if(e.length&&(d=e.data("time")),null!==d)if("string"==typeof d)a.val(d),a.trigger("selectTime").trigger("changeTime").trigger("change","timepicker");else{var f=w(d,b);r(a,f,"select")}return!0}function v(a,b){a=Math.abs(a);var f,g,c=Math.round(a/60),e=[];return 60>c?e=[c,d.mins]:(f=Math.floor(c/60),g=c%60,30==b&&30==g&&(f+=d.decimal+5),e.push(f),e.push(1==f?d.hr:d.hrs),30!=b&&g&&(e.push(g),e.push(d.mins))),e.join(" ")}function w(e,f){if(null!==e){var g=new Date(b.valueOf()+1e3*e);if(!isNaN(g.getTime())){if("function"===a.type(f.timeFormat))return f.timeFormat(g);for(var i,j,h="",k=0;k<f.timeFormat.length;k++)switch(j=f.timeFormat.charAt(k)){case"a":h+=g.getHours()>11?d.pm:d.am;break;case"A":h+=g.getHours()>11?d.PM:d.AM;break;case"g":i=g.getHours()%12,h+=0===i?"12":i;break;case"G":i=g.getHours(),e===c&&(i=24),h+=i;break;case"h":i=g.getHours()%12,0!==i&&10>i&&(i="0"+i),h+=0===i?"12":i;break;case"H":i=g.getHours(),e===c&&(i=24),h+=i>9?i:"0"+i;break;case"i":var l=g.getMinutes();h+=l>9?l:"0"+l;break;case"s":e=g.getSeconds(),h+=e>9?e:"0"+e;break;case"\\":k++,h+=format.charAt(k);break;default:h+=j}return h}}}function x(a,b){if(""===a)return null;if(!a||a+0==a)return a;if("object"==typeof a)return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds();a=a.toLowerCase().replace(".",""),("a"==a.slice(-1)||"p"==a.slice(-1))&&(a+="m");var e="("+d.am.replace(".","")+"|"+d.pm.replace(".","")+"|"+d.AM.replace(".","")+"|"+d.PM.replace(".","")+")?",f=new RegExp("^"+e+"\\s*([0-2]?[0-9])\\W?([0-5][0-9])?\\W?([0-5][0-9])?\\s*"+e+"$"),g=a.match(f);if(!g)return null;var h=parseInt(1*g[2],10),i=g[1]||g[5],j=h;if(12>=h&&i){var k=i==d.pm||i==d.PM;j=12==h?k?12:0:h+(k?12:0)}var l=1*g[3]||0,m=1*g[4]||0,n=3600*j+60*l+m;if(!i&&b&&b._twelveHourTime&&b.scrollDefault){var o=n-b.scrollDefault;0>o&&o>=c/-2&&(n=(n+c/2)%c)}return n}var b=k(),c=86400,d={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},e={init:function(b){return this.each(function(){var c=a(this),f=[];for(var i in a.fn.timepicker.defaults)c.data(i)&&(f[i]=c.data(i));var j=a.extend({},a.fn.timepicker.defaults,f,b);j.lang&&(d=a.extend(d,j.lang)),j=g(j),c.data("timepicker-settings",j),c.addClass("ui-timepicker-input"),j.useSelect?h(c):(c.prop("autocomplete","off"),c.on("click.timepicker focus.timepicker",e.show),c.on("change.timepicker",p),c.on("keydown.timepicker",s),c.on("keyup.timepicker",t),p.call(c.get(0)))})},show:function(b){var c=a(this),d=c.data("timepicker-settings");if(b){if(!d.showOnFocus)return!0;b.preventDefault()}if(d.useSelect)return c.data("timepicker-list").focus(),void 0;m(c)&&c.blur();var g=c.data("timepicker-list");if(!c.prop("readonly")&&(g&&0!==g.length&&"function"!=typeof d.durationTime||(h(c),g=c.data("timepicker-list")),!f(g))){e.hide(),g.show();var i={};i.left=d.orientation.match(/r/)?c.offset().left+c.outerWidth()-g.outerWidth()+parseInt(g.css("marginLeft").replace("px",""),10):c.offset().left+parseInt(g.css("marginLeft").replace("px",""),10);var j;j=d.orientation.match(/t/)?"t":d.orientation.match(/b/)?"b":c.offset().top+c.outerHeight(!0)+g.outerHeight()>a(window).height()+a(window).scrollTop()?"t":"b","t"==j?(g.addClass("ui-timepicker-positioned-top"),i.top=c.offset().top-g.outerHeight()+parseInt(g.css("marginTop").replace("px",""),10)):(g.removeClass("ui-timepicker-positioned-top"),i.top=c.offset().top+c.outerHeight()+parseInt(g.css("marginTop").replace("px",""),10)),g.offset(i);var k=g.find(".ui-timepicker-selected");if(k.length||(q(c)?k=n(c,g,x(q(c))):d.scrollDefault&&(k=n(c,g,d.scrollDefault))),k&&k.length){var o=g.scrollTop()+k.position().top-k.outerHeight();g.scrollTop(o)}else g.scrollTop(0);return a(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",l),d.closeOnWindowScroll&&a(document).on("scroll.ui-timepicker",l),c.trigger("showTimepicker"),this}},hide:function(){var c=a(this),d=c.data("timepicker-settings");return d&&d.useSelect&&c.blur(),a(".ui-timepicker-wrapper").each(function(){var b=a(this);if(f(b)){var c=b.data("timepicker-input"),d=c.data("timepicker-settings");d&&d.selectOnBlur&&u(c),b.hide(),c.trigger("hideTimepicker")}}),this},option:function(b,c){return this.each(function(){var d=a(this),e=d.data("timepicker-settings"),f=d.data("timepicker-list");if("object"==typeof b)e=a.extend(e,b);else if("string"==typeof b&&"undefined"!=typeof c)e[b]=c;else if("string"==typeof b)return e[b];e=g(e),d.data("timepicker-settings",e),f&&(f.remove(),d.data("timepicker-list",!1)),e.useSelect&&h(d)})},getSecondsFromMidnight:function(){return x(q(this))},getTime:function(a){var b=this,c=q(b);if(!c)return null;a||(a=new Date);var d=x(c),e=new Date(a);return e.setHours(d/3600),e.setMinutes(d%3600/60),e.setSeconds(d%60),e.setMilliseconds(0),e},setTime:function(a){var b=this,c=b.data("timepicker-settings");if(c.forceRoundTime)var d=j(a,c);else var d=w(x(a),c);return r(b,d),b.data("timepicker-list")&&o(b,b.data("timepicker-list")),this},remove:function(){var a=this;if(a.hasClass("ui-timepicker-input")){var b=a.data("timepicker-settings");return a.removeAttr("autocomplete","off"),a.removeClass("ui-timepicker-input"),a.removeData("timepicker-settings"),a.off(".timepicker"),a.data("timepicker-list")&&a.data("timepicker-list").remove(),b.useSelect&&a.show(),a.removeData("timepicker-list"),this}}};a.fn.timepicker=function(b){return this.length?e[b]?this.hasClass("ui-timepicker-input")?e[b].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.timepicker"),void 0):e.init.apply(this,arguments):this},a.fn.timepicker.defaults={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,roundingFunction:function(a,b){if(null===a)return null;var c=a%(60*b.step);return c>=30*b.step?a+=60*b.step-c:a-=c,a},appendTo:"body",orientation:"l",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1,show2400:!1}});